<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Using Shinypods &bull; shinypod</title><!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/sandstone/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous"><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../jquery.sticky-kit.min.js"></script><script src="../pkgdown.js"></script><!-- mathjax --><script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <div class="container template-vignette">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">shinypod</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../articles/index.html">Articles</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/ijlyttle/shinypod">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9">
    <div class="page-header toc-ignore">
      <h1>Using Shinypods</h1>
                        <h4 class="author">Ian Lyttle &amp; Alex Shum</h4>
            
            <h4 class="date">2016-12-04</h4>
          </div>

    
    
<div class="contents">
<p>Shiny modules make it much easier to design and build complex shiny apps.</p>
<p>Imagine that you are designing an app that requires the user to upload a csv file to be parsed into a data frame. You will wish to use the data frame elsewhere in the app. Instead of writing the parser from scratch, you can use a set of <strong>shinypod</strong> functions in your app.</p>
<p>Shinypod is simply an implementaton of a set of design guidelines to allow you to use, remix, and even build your own shiny modules. An advantage of using such guidelines is that we can all use each others&rsquo; shinypods more quickly and reliably.</p>
<p>Before getting started, you are referred to RStudio&rsquo;s <a href="http://shiny.rstudio.com/articles/modules.html">article on shiny modules</a>.</p>
<div id="first-example---csv-parser" class="section level2">
<h2 class="hasAnchor"><html><body><a href="#first-example---csv-parser" class="anchor"> </a></body></html>First example - CSV parser</h2>
<p>This package, shinypod, offers functions that you can use to put a CSV parser into your app.</p>
<p>Let&rsquo;s look at a <code>ui.R</code> file:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(<span class="st">"shiny"</span>)
<span class="kw">library</span>(<span class="st">"shinyjs"</span>)
<span class="kw">library</span>(<span class="st">"shinypod"</span>)
<span class="kw">library</span>(<span class="st">"dygraphs"</span>)
<span class="kw">library</span>(<span class="st">"htmltools"</span>)

<span class="kw">shinyUI</span>(
  <span class="kw">fluidPage</span>(
    <span class="kw">useShinyjs</span>(),
    <span class="kw">titlePanel</span>(<span class="st">"CSV parser"</span>),
    <span class="kw">sidebarLayout</span>(
      <span class="kw">sidebarPanel</span>(
        <span class="kw">upload_text_sidebar_side</span>(<span class="st">"text"</span>),
        tags$<span class="kw">hr</span>(),
        <span class="kw"><a href="../reference/read_delim_sidebar_side.html">read_delim_sidebar_side</a></span>(<span class="st">"data"</span>),
        tags$<span class="kw">hr</span>(),
        <span class="kw"><a href="../reference/dygraph_sidebar_side.html">dygraph_sidebar_side</a></span>(<span class="st">"dygraph"</span>)
      ),
      <span class="kw">mainPanel</span>(
        <span class="kw">upload_text_sidebar_main</span>(<span class="st">"text"</span>),
        <span class="kw"><a href="../reference/read_delim_sidebar_side.html">read_delim_sidebar_main</a></span>(<span class="st">"data"</span>),
        <span class="kw"><a href="../reference/dygraph_sidebar_side.html">dygraph_sidebar_main</a></span>(<span class="st">"dygraph"</span>),
        <span class="kw">dygraphOutput</span>(<span class="st">"dyg"</span>)
      )
    )
  )
)</code></pre></div>
<p>And a <code>server.R</code> file:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(<span class="st">"shiny"</span>)
<span class="kw">library</span>(<span class="st">"tibble"</span>)
<span class="kw">library</span>(<span class="st">"shinypod"</span>)
<span class="kw">library</span>(<span class="st">"dygraphs"</span>)

<span class="kw">shinyServer</span>(function(input, output, session) {

  rct_text &lt;-<span class="st"> </span><span class="kw">callModule</span>(<span class="dt">module =</span> upload_text_sidebar_server, <span class="dt">id =</span> <span class="st">"text"</span>)

  rct_data &lt;-<span class="st"> </span><span class="kw">callModule</span>(<span class="dt">module =</span> read_delim_sidebar_server, <span class="dt">id =</span> <span class="st">"data"</span>, <span class="dt">text =</span> rct_text)

  rct_dyg &lt;-<span class="st"> </span><span class="kw">callModule</span>(<span class="dt">module =</span> dygraph_sidebar_server, <span class="dt">id =</span> <span class="st">"dygraph"</span>, <span class="dt">data =</span> rct_data)

  <span class="kw">observe</span>({
    <span class="kw">toggle</span>(<span class="st">"dyg"</span>, <span class="dt">condition =</span> <span class="kw"><a href="../reference/isValidy.html">isValidy</a></span>(<span class="kw">rct_dyg</span>()))
  })

  output$dyg &lt;-<span class="st"> </span><span class="kw">renderDygraph</span>(<span class="kw">dyOptions</span>(<span class="kw">rct_dyg</span>(), <span class="dt">useDataTimezone =</span> <span class="ot">TRUE</span>))

})</code></pre></div>
<p>For this implementation we call upon three functions.</p>
<ul><li><code>read_delim_sb_side()</code></li>
<li><code>read_delim_sb_main()</code></li>
<li><code>read_delim_sb_server()</code></li>
</ul><p>The first two functions each return a named <code>shiny::tagList</code> of UI elements that can be used in a sidebar layout. The side panel contains the inputs, and the main panel contains the outputs. We will use this as a general rule, but recognize that there are situations where you may have some inputs in the main panel, or that some elements may serve as both input and output.</p>
<p>The third function is used in the server function to return a reactive function. This reactive returns the parsed dataframe.</p>
<p>To use all three, all you have to do is call each of the three functions using the same <code>id</code>, in this case <code>"csv"</code> - this is to keep the shiny namespace tidy.</p>
<p>If you like, try out the <a href="https://ijlyttle.shinyapps.io/read_delim/">deployed app</a>.</p>
</div>
<div id="second-example---csv-parser-with-dygraph" class="section level2">
<h2 class="hasAnchor"><html><body><a href="#second-example---csv-parser-with-dygraph" class="anchor"> </a></body></html>Second example - CSV parser with dygraph</h2>
<p>In this example, we will look at what you can do by combining shinypods. Here, we will combine the pod used to parse a csv with a pod used to build a dygraph.</p>
<p>Dygraphs are especially handy for visualizing time series. Often, time-series data may be available in a data frame (parsed from a csv), and we wish to visualize it. This is where we would use a set of dygraphs functions from shinypod.</p>
<p>We can build onto our previous example by adding a dyraph shinypod.</p>
<p>Let&rsquo;s look at a <code>ui.R</code> file:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(<span class="st">"shiny"</span>)
<span class="kw">library</span>(<span class="st">"shinyjs"</span>)
<span class="kw">library</span>(<span class="st">"shinypod"</span>)
<span class="kw">library</span>(<span class="st">"dygraphs"</span>)

<span class="kw">fluidPage</span>(
  <span class="kw">useShinyjs</span>(),
  <span class="kw">titlePanel</span>(<span class="st">"CSV parser and dygraph"</span>),
  <span class="kw">sidebarLayout</span>(
    <span class="kw">sidebarPanel</span>(
      <span class="kw"><a href="../reference/read_delim_sidebar_side.html">read_delim_sidebar_side</a></span>(<span class="st">"csv"</span>),
      tags$<span class="kw">hr</span>(),
      <span class="kw"><a href="../reference/dygraph_sidebar_side.html">dygraph_sidebar_side</a></span>(<span class="st">"dyg"</span>)
    ),
    <span class="kw">mainPanel</span>(
      <span class="kw"><a href="../reference/read_delim_sidebar_side.html">read_delim_sidebar_main</a></span>(<span class="st">"csv"</span>),
      <span class="kw"><a href="../reference/dygraph_sidebar_side.html">dygraph_sidebar_main</a></span>(<span class="st">"dyg"</span>),
      <span class="kw">dygraphOutput</span>(<span class="st">"csv_dyg"</span>)
    )
  )
)</code></pre></div>
<p>And a <code>server.R</code> file:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(<span class="st">"shiny"</span>)
<span class="kw">library</span>(<span class="st">"shinyjs"</span>)
<span class="kw">library</span>(<span class="st">"shinypod"</span>)
<span class="kw">library</span>(<span class="st">"dygraphs"</span>)
<span class="kw">library</span>(<span class="st">"dplyr"</span>)

function(input, output, session) {

  rct_data &lt;-<span class="st"> </span><span class="kw">callModule</span>(<span class="dt">module =</span> read_delim_sidebar_server, <span class="dt">id =</span> <span class="st">"csv"</span>)

  rct_dyg &lt;-<span class="st"> </span><span class="kw">callModule</span>(dygraph_sidebar_server, <span class="st">"dyg"</span>, <span class="dt">data =</span> rct_data)

  <span class="kw">observe</span>({
    shinyjs::<span class="kw">toggle</span>(<span class="dt">id =</span> <span class="st">"csv_dyg"</span>, <span class="dt">condition =</span> <span class="kw"><a href="../reference/isValidy.html">isValidy</a></span>(<span class="kw">rct_dyg</span>()))
  })

  output$csv_dyg &lt;-<span class="st"> </span><span class="kw">renderDygraph</span>({
    <span class="kw">rct_dyg</span>() %&gt;%
<span class="st">      </span><span class="kw">dyOptions</span>(<span class="dt">useDataTimezone =</span> <span class="ot">TRUE</span>)
  })

}</code></pre></div>
<p>A few things to note:</p>
<ul><li>we use a different namespace id for the read_delim pod (<code>"csv"</code>) as for the dygraph pod (<code>"dyg"</code>).</li>
<li>we supply the reactive returned by the <code>read_delim_sb_server()</code> function as an argument to the <code><a href="../reference/dygraph_server.html">dygraph_server()</a></code> function. This is how the data is moved around.</li>
<li>the <code><a href="../reference/dygraph_server.html">dygraph_server()</a></code> function returns a reactive that returns a dygraph. We use this to build the output for the app. Note also that the dygraph shinypod returns a basic dygraph; we can use functions from the dygraphs package to customize it.</li>
</ul><p>If you like, try out the <a href="https://ijlyttle.shinyapps.io/read_delim_dygraph/">deployed app</a>.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2>Contents</h2>
      <ul class="nav nav-pills nav-stacked"><li><a href="#first-example---csv-parser">First example - CSV parser</a></li>
      <li><a href="#second-example---csv-parser-with-dygraph">Second example - CSV parser with dygraph</a></li>
      </ul></div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Ian Lyttle, Alex Shum,  Schneider Electric.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer></div>

  </body></html>
